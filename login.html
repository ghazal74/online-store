<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>login</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
    
    <!-- CSS 
    ========================= -->


    <!-- Plugins CSS -->
    <link rel="stylesheet" href="plugins.css">
    
    <!-- Main Style CSS -->
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <!-- hash section -->
    <div class="hash">
        <div class="container5">Free Returns: For First 40 Days</div>
        <li class="top_links"><a href="#">Sign In <i class="ion-chevron-down"></i></a>
            <ul class="dropdown_links">
                <li><a href="index.html">home </a></li>
                <li><a href="#">Sign In</a></li>
            </ul>
        </li>
        <li class="language"><a href="#"><img src="img/language.png" alt=""> English <i class="ion-chevron-down"></i></a>
            <ul class="dropdown_language">
                <li><a href="#"><img src="img/language2.png" alt="">Arabic</a></li>
            </ul>
        </li>
        <div class="currency">
            <a href="#">USD <i class="ion-chevron-down"></i></a>
            <ul class="dropdown_currency">
                <li><a href="#">SAR</a></li>
                <li><a href="#">AED</a></li>
                <li><a href="#">UED</a></li>
            </ul>
        </div>
    
    </div>
                     
    
    <!-- customer login start -->
    <div class="customer_login">
        <div class="container">
            <div class="row">
                <!-- Login Area -->
                <div class="col-lg-6 col-md-6">
                    <div class="account_form">
                        <h2>Login</h2>
                        <form action="#">
                            <p>
                                <label for="username">Username or email <span>*</span></label>
                                <input type="email" id="username" name="username" required>
                            </p>
                            <p>
                                <label for="password">Password <span>*</span></label>
                                <input type="password" id="password" name="password" required>
                            </p>
                            <div class="login_submit">
                                <a href="#">Lost your password?</a>
                                <label for="remember">
                                    <input id="remember" type="checkbox">
                                    Remember me
                                </label>
                                <button type="submit">Login</button>
                            </div>
                        </form>
                    </div>
                </div>
    
                <!-- Register Area -->
                <div class="col-lg-6 col-md-6">
                    <div class="account_form register">
                        <h2>Register</h2>
                        <form action="#">
                            <p>
                                <label for="email">Email address <span>*</span></label>
                                <input type="email" id="email" name="email" required>
                            </p>
                            <p>
                                <label for="reg_password">Password <span>*</span></label>
                                <input type="password" id="reg_password" name="reg_password" required>
                            </p>
                            <div class="login_submit">
                                <button type="submit">Register</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- customer login end -->

    <!-- customer login end -->

            <!--footer content-->
            <footer class="footer">
                <div class="container7">
                    <div class="column">
                        <h3>Contact Information</h3>
                        <p>üìû Phone: 0528686321</p>
                        <p>‚úâÔ∏è Email: Info@almotabaed.com</p>
                    </div>
                    <div class="column">
                        <h3>Important Links</h3>
                        <a href="#">Privacy Policy</a>
                        <br>
                        <a href="#">Terms of Use</a>
                    </div>
                    <div class="column social">
                        <h3>Follow Us</h3>
                        <a href="#"> Facebook</a>
                        <br>
                        <a href="#"> Twitter</a>
                        <br>
                        <a href="#"> Instagram</a>
                    </div>
                </div>
                <div class="copyright">
                    &copy; 2025 All Rights Reserved | KGM Marketing
                </div>
            </footer>

    <!--footer area end-->

<!-- JS
============================================ -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
            const loginForm = document.querySelector('.account_form form[action="#"]');
            const registerForm = document.querySelector('.account_form.register form[action="#"]');

            if (loginForm) {
                loginForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const email = document.querySelector('#username').value;
                    const password = document.querySelector('#password').value;

                    const res = await fetch('http://localhost:5000/login', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password })
                    });

                    const data = await res.json();
                    if (res.ok) {
                        alert("‚úÖ Logged in successfully!");
                        localStorage.setItem('token', data.token);
                        window.location.href = "index.html";  // üîπ ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©
                    } else {
                        alert(`‚ùå Error: ${data.message}`);
                    }
                });
            }

            if (registerForm) {
                registerForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const email = document.querySelector('#email').value;
                    const password = document.querySelector('#reg_password').value;

                    const res = await fetch('http://localhost:5000/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, password })
                    });

                    const data = await res.json();
                    if (res.ok) {
                        window.location.href = "index.html";  // üîπ ÿ™Ÿàÿ¨ŸäŸá ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ•ŸÑŸâ ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© ÿ®ÿπÿØ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ
                    } else {
                        alert(`‚ùå Error: ${data.message}`);
                    }
                });
            }
        });
        if (document.querySelector("#remember").checked) {
                localStorage.setItem('token', data.token);
            } else {
                sessionStorage.setItem('token', data.token);
            }

            if (localStorage.getItem('token') || sessionStorage.getItem('token')) {
                    window.location.href = "home.html";
                }
    const cookieParser = require('cookie-parser');
    app.use(cookieParser());
    res.cookie("token", token, { httpOnly: true, secure: true, sameSite: 'Strict' }).json({ message: "Logged in!" });

    

 </script>
<!-- Plugins JS -->
<script src="plugins.js"></script>

<!-- Main JS -->
<script src="main.js"></script>



</body>

</html>